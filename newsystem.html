<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <meta content="text/html; charset=ISO-8859-1" http-equiv="content-type">
  <title>Configuring a new COE RHEL/CentOS linux system</title>
  <style type="text/css">
     body,td { font-family: arial;  font-size: 80%; }
     tt,pre { font-size: 120%; }
     
     LI { margin-top: .4em; }
  </style>
</head>
<body>

<h2>Configuring a new COE RHEL/CentOS linux system</h2>
Charles Roth<br/>
Last update: 2014-12-07

<p/><b>I. Introduction</b><br>
This document 
describes specific steps taken to set up a new RHEL (Red Hat Enterprise Linux, 
or CentOS) server(s) from ServerBeach.&nbsp;
Basically, this is just a record of what we do to change the base 
configuration of the server as provided by ServerBeach.

<p/>
This is a work-in-progress; check the "last update" data at the top for new versions.

<p/>
<b>II. Basic Server Configuration</b><br/>
<ol>
  <li><b>Domain name</b>
  <ol type="a">
     <li>Add domain name for new server to our existing DNS records.
      <p/>
      Currently, these are maintained by Charles, and are spread
       across 3 different DNS servers around the country.&nbsp;
      (ns1.screenporch.com, ns2.screenporch.com, ns3.screenporch.com.)&nbsp;
      The advantage with this approach is that we can change DNS
      resolution for a server very quickly if we need to migrate to a failover server.&nbsp;
      (Commercial DNS services tend to not be able to react as quickly.)

      <p/>
      The disadvantage is, Charles is an individual, with no other
      support behind him.

      <p/>
      Another option would be to provide Scott(?) with direct access
      to the master DNS server, and appropriate training, if needed.
     </li>

     <li>Use the ServerBeach control panel to register the reverse-DNS
       lookup of the new server's IP address, to our domain name.
   </ol>


<p/>
   
  <li><b>Root login</b>.&nbsp;
      Edit /etc/ssh/sshd_config, make sure it is using "Protocol 2", and 
      "PermitRootLogin yes".&nbsp; Restart sshd with:
      <ul>
      <table>
      <tr><td><tt>ps -ef | grep "/usr/sbin/sshd"&nbsp;&nbsp;&nbsp;</tt></td>   <td>(to find the process id <i>nnnnn</i> of sshd)</td>
      <tr><td><tt>kill -1 <i>nnnnn</i></td>   <td>(to restart sshd)</td>
      </table>
      </ul>

    <p/>
    Change the root password.

<p/>
<li><b>Install git</b>.&nbsp; As root,
<pre>
   yum install git
</pre>

<p/>
<li><b>Set up Iptables firewall</b>.&nbsp;
As root, check out the COE scripts repository, 
and copy the firewall scripts to /usr/local/bin:
<pre>
   git clone git@github.com:wcroth55/coe.git COE
   cp COE/firewall          /usr/local/bin
   cp COE/firewallRules.txt /usr/local/bin
   chmod 700                /usr/local/bin/firewall*
</pre>

Edit /usr/local/bin/firewallRules.txt to
assign roles and IP addresses as appropriate.&nbsp;
See the comments at the top of the file for details.

<p/>
Edit /etc/rc.d/rc.local, and add the following line to the bottom:
<pre>
   /usr/local/bin/firewall
</pre>

This will ensure the firewall gets turned on when the server reboots.

<p/>
<li><b>Update all installed software</b>.&nbsp;
As root, do:
<pre>
   yum update
</pre>
and answer "yes" or the equivalent to all questions.

</ol>

<p/>
<b>III. Install software needed to build and run Caucus</b>.

<ol>
<li> cc
</ol>



</body>
</html>
